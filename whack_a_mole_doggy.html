<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hylst Whack-a-Mole Doggy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes hit {
            0% { transform: scale(1); }
            50% { transform: scale(0.8); }
            100% { transform: scale(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .mole-appear {
            animation: popIn 0.3s forwards;
        }
        
        .mole-hit {
            animation: hit 0.2s forwards;
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        .combo-text {
            text-shadow: 0 0 10px #ff0, 0 0 20px #ff0;
            transition: all 0.3s;
        }
        
        .progress-bar {
            transition: width 0.5s linear;
        }
        
        .hole::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 20px;
            background: #5c3a21;
            border-radius: 50%;
            z-index: -1;
        }
    </style>
</head>
<body class="bg-green-800 min-h-screen flex flex-col items-center justify-center p-4 font-sans">
    <div class="max-w-4xl w-full">
        <h1 class="text-5xl font-bold text-center text-yellow-300 mb-2">Hylst Whack-a-Mole Doggy!</h1>
        
        <div class="flex justify-between items-center mb-6 bg-green-900 p-4 rounded-lg shadow-lg">
            <div class="text-white">
                <div class="text-2xl font-bold">Score: <span id="score" class="text-yellow-300">0</span></div>
                <div class="text-lg">Combo: <span id="combo" class="text-yellow-300">1x</span></div>
            </div>
            
            <div class="flex flex-col items-center">
                <div class="text-white mb-2">Level: <span id="level" class="text-yellow-300">1</span></div>
                <div class="w-32 h-4 bg-gray-700 rounded-full overflow-hidden">
                    <div id="level-progress" class="h-full bg-yellow-400 progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="text-white">
                <div class="text-2xl font-bold">Time: <span id="time" class="text-yellow-300">60</span>s</div>
                <div class="text-lg">High Score: <span id="high-score" class="text-yellow-300">0</span></div>
            </div>
        </div>
        
        <div class="grid grid-cols-3 gap-6 mb-8" id="game-board">
            <!-- Holes will be generated by JavaScript -->
        </div>
        
        <div class="flex justify-center gap-4">
            <button id="start-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full text-xl transition-all transform hover:scale-105 shadow-lg">
                <i class="fas fa-play mr-2"></i>Start Game
            </button>
            <button id="sound-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full text-xl transition-all transform hover:scale-105 shadow-lg">
                <i class="fas fa-volume-up mr-2"></i>Sound On
            </button>
        </div>
    </div>
    
    <audio id="hit-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" preload="auto"></audio>
    <audio id="miss-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-casino-notification-211.mp3" preload="auto"></audio>
    <audio id="combo-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>
    <audio id="level-up-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" preload="auto"></audio>
    
    <script>
        // Game variables
        let score = 0;
        let highScore = localStorage.getItem('whackHighScore') || 0;
        let timeLeft = 60;
        let gameInterval;
        let timeInterval;
        let level = 1;
        let levelProgress = 0;
        let comboCount = 0;
        let lastHitTime = 0;
        let gameActive = false;
        let soundOn = true;
        
        // DOM elements
        const gameBoard = document.getElementById('game-board');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('high-score');
        const timeDisplay = document.getElementById('time');
        const levelDisplay = document.getElementById('level');
        const levelProgressBar = document.getElementById('level-progress');
        const comboDisplay = document.getElementById('combo');
        const startBtn = document.getElementById('start-btn');
        const soundBtn = document.getElementById('sound-btn');
        const hitSound = document.getElementById('hit-sound');
        const missSound = document.getElementById('miss-sound');
        const comboSound = document.getElementById('combo-sound');
        const levelUpSound = document.getElementById('level-up-sound');
        
        // Initialize game board
        function createGameBoard() {
            gameBoard.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const hole = document.createElement('div');
                hole.className = 'hole relative w-full h-32 bg-gray-800 rounded-full cursor-pointer flex items-center justify-center overflow-hidden';
                hole.dataset.hasMole = 'false';
                
                const mole = document.createElement('div');
                mole.className = 'mole absolute w-24 h-24 bg-center bg-contain bg-no-repeat hidden';
                mole.style.backgroundImage = 'url(https://cdn-icons-png.flaticon.com/512/194/194279.png)';
                mole.style.bottom = '-100%';
                
                hole.appendChild(mole);
                hole.addEventListener('click', () => whackMole(hole));
                gameBoard.appendChild(hole);
            }
        }
        
        // Start game
        function startGame() {
            if (gameActive) return;
            
            gameActive = true;
            score = 0;
            timeLeft = 60;
            level = 1;
            levelProgress = 0;
            comboCount = 0;
            lastHitTime = 0;
            
            scoreDisplay.textContent = score;
            highScoreDisplay.textContent = highScore;
            timeDisplay.textContent = timeLeft;
            levelDisplay.textContent = level;
            levelProgressBar.style.width = '0%';
            comboDisplay.textContent = '1x';
            
            createGameBoard();
            
            // Start timer
            timeInterval = setInterval(() => {
                timeLeft--;
                timeDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // Start mole popping
            gameInterval = setInterval(popRandomMole, getMoleInterval());
            
            startBtn.innerHTML = '<i class="fas fa-pause mr-2"></i>Pause Game';
        }
        
        // Pause game
        function pauseGame() {
            if (!gameActive) return;
            
            gameActive = false;
            clearInterval(gameInterval);
            clearInterval(timeInterval);
            
            // Hide all moles
            document.querySelectorAll('.mole').forEach(mole => {
                mole.classList.add('hidden');
                mole.parentElement.dataset.hasMole = 'false';
            });
            
            startBtn.innerHTML = '<i class="fas fa-play mr-2"></i>Resume Game';
        }
        
        // End game
        function endGame() {
            gameActive = false;
            clearInterval(gameInterval);
            clearInterval(timeInterval);
            
            // Update high score
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('whackHighScore', highScore);
                highScoreDisplay.textContent = highScore;
            }
            
            startBtn.innerHTML = '<i class="fas fa-play mr-2"></i>Start Game';
            
            // Show game over animation
            gameBoard.classList.add('shake');
            setTimeout(() => gameBoard.classList.remove('shake'), 500);
        }
        
        // Pop a random mole
        function popRandomMole() {
            if (!gameActive) return;
            
            const holes = Array.from(document.querySelectorAll('.hole'));
            const availableHoles = holes.filter(hole => hole.dataset.hasMole === 'false');
            
            if (availableHoles.length === 0) return;
            
            const randomHole = availableHoles[Math.floor(Math.random() * availableHoles.length)];
            const mole = randomHole.querySelector('.mole');
            
            randomHole.dataset.hasMole = 'true';
            mole.style.bottom = '0';
            mole.classList.remove('hidden', 'mole-hit');
            mole.classList.add('mole-appear');
            
            // Mole will hide after random time
            setTimeout(() => {
                if (randomHole.dataset.hasMole === 'true') {
                    hideMole(randomHole);
                }
            }, getMoleDuration());
        }
        
        // Hide mole
        function hideMole(hole) {
            if (!gameActive) return;
            
            hole.dataset.hasMole = 'false';
            const mole = hole.querySelector('.mole');
            mole.classList.remove('mole-appear');
            mole.style.bottom = '-100%';
            
            // Reset combo if mole wasn't hit
            if (comboCount > 0) {
                comboCount = 0;
                comboDisplay.textContent = '1x';
            }
        }
        
        // Whack mole
        function whackMole(hole) {
            if (!gameActive || hole.dataset.hasMole !== 'true') {
                if (soundOn) missSound.play();
                return;
            }
            
            // Update score with combo multiplier
            const currentTime = Date.now();
            const timeDiff = currentTime - lastHitTime;
            const comboThreshold = 1000; // 1 second for combo
            
            if (timeDiff < comboThreshold) {
                comboCount++;
            } else {
                comboCount = 0;
            }
            
            lastHitTime = currentTime;
            
            const comboMultiplier = Math.min(5, Math.floor(comboCount / 3) + 1);
            const pointsEarned = 10 * comboMultiplier;
            
            score += pointsEarned;
            scoreDisplay.textContent = score;
            comboDisplay.textContent = `${comboMultiplier}x`;
            
            if (comboMultiplier > 1) {
                comboDisplay.classList.add('combo-text');
                setTimeout(() => comboDisplay.classList.remove('combo-text'), 300);
                if (soundOn) comboSound.play();
            }
            
            // Play hit sound
            if (soundOn) hitSound.play();
            
            // Update level progress
            levelProgress += pointsEarned;
            const levelThreshold = level * 100;
            
            if (levelProgress >= levelThreshold) {
                levelUp();
                levelProgress = 0;
            } else {
                levelProgressBar.style.width = `${(levelProgress / levelThreshold) * 100}%`;
            }
            
            // Animate mole hit
            hole.dataset.hasMole = 'false';
            const mole = hole.querySelector('.mole');
            mole.classList.remove('mole-appear');
            mole.classList.add('mole-hit');
            
            // Show points earned
            const pointsPopup = document.createElement('div');
            pointsPopup.className = 'absolute text-yellow-300 font-bold text-xl animate-bounce';
            pointsPopup.textContent = `+${pointsEarned}`;
            hole.appendChild(pointsPopup);
            
            setTimeout(() => {
                pointsPopup.remove();
            }, 1000);
        }
        
        // Level up
        function levelUp() {
            level++;
            levelDisplay.textContent = level;
            levelProgressBar.style.width = '0%';
            
            if (soundOn) levelUpSound.play();
            
            // Increase difficulty
            clearInterval(gameInterval);
            gameInterval = setInterval(popRandomMole, getMoleInterval());
            
            // Show level up animation
            levelDisplay.classList.add('combo-text');
            setTimeout(() => levelDisplay.classList.remove('combo-text'), 1000);
        }
        
        // Get mole interval based on level
        function getMoleInterval() {
            return Math.max(200, 1000 - (level * 100));
        }
        
        // Get mole duration based on level
        function getMoleDuration() {
            return Math.max(500, 1500 - (level * 100));
        }
        
        // Toggle sound
        function toggleSound() {
            soundOn = !soundOn;
            soundBtn.innerHTML = soundOn 
                ? '<i class="fas fa-volume-up mr-2"></i>Sound On' 
                : '<i class="fas fa-volume-mute mr-2"></i>Sound Off';
        }
        
        // Event listeners
        startBtn.addEventListener('click', () => {
            if (gameActive) {
                pauseGame();
            } else {
                startGame();
            }
        });
        
        soundBtn.addEventListener('click', toggleSound);
        
        // Initialize
        highScoreDisplay.textContent = highScore;
        createGameBoard();
    </script>
</body>
</html>